"use strict";

var _Promise = require("babel-runtime/core-js/promise")["default"];

Object.defineProperty(exports, "__esModule", {
    value: true
});

exports["default"] = function (tasks) {
    return [].concat(tasks).reduce(function (sequence, task) {
        return sequence.then(function () {
            console.log("[" + task.name + "]: start");

            return task().then(function (message) {
                var messagesList = [].concat(message);

                messagesList.forEach(function (messageItem) {
                    if (messageItem) {
                        console.log("[" + task.name + "]: " + messageItem);
                    }
                });

                console.log("[" + task.name + "]: done");
            })["catch"](function (error) {
                if (error) {
                    console.log("[" + task.name + "]: " + error);
                }

                console.log("[" + task.name + "]: error");

                throw new Error(error);
            });
        });
    }, _Promise.resolve());
};

module.exports = exports["default"];